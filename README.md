# 战国·与伍同行 (Warring States: With the Five)

![游戏版本](https://img.shields.io/badge/Version-1.0.0-gold)
![技术栈](https://img.shields.io/badge/Tech-React_%7C_TS_%7C_Tailwind-blue)
![风格](https://img.shields.io/badge/Style-Hardcore_Tactical_RPG-red)

> “秦王扫六合，虎视何雄哉！挥剑决浮云，诸侯尽西来。”

《战国·与伍同行》是一款以战国末期为背景的硬核小队战术 RPG 游戏。玩家将扮演一支名为“伍”的佣兵团首领，在战火纷飞的中原大地求生，经营战团、执行契约，并在大国兴衰的洪流中谱写自己的篇章。本游戏在设计上深度致敬了《Battle Brothers》（战场兄弟），强调资源管理、高难度回合制战斗及角色永久死亡的张力。

---

## 核心特色

### 🗺️ 沉浸式世界地图
*   **官道系统**：真实模拟古代交通网，城市间通过“官道”连接。官道不仅是视觉指引，更提供移动速度加成。
*   **动态 AI 生态**：
    *   **流寇/乱军**：具有领地意识，会主动追击进入视线的玩家。
    *   **商队**：周期性在城邑间往返，玩家可以保护或掠夺。
    *   **迷雾系统**：双层战争迷雾设计（未探索的纯黑 vs 已探索但超出视线的阴影）。NPC 严格受视野限制，增强侦察的战略价值。
*   **高保真渲染**：基于 HTML5 Canvas 构建的高性能渲染引擎，支持平滑缩放与拖拽。

### ⚔️ 六角格硬核战术战斗
*   **AP/疲劳双系统**：每个动作消耗行动点 (AP)，并累积疲劳值 (Fatigue)。超负荷的装备会显著降低角色的战斗持久力。
*   **高度差加成**：占据高地地块可获得命中加成，真实模拟古代战争地利优势。
*   **伤损机制**：
    *   **部位打击**：攻击可能命中头部或身体，分别损耗头盔或甲胄的耐久度。
    *   **重伤系统**：当生命值受到剧烈冲击时，角色会遭受永久或临时伤残。
*   **武器专精**：每种武器（戈、矛、剑、弩）拥有独特的战术技能，如矛墙 (Spearwall) 可限制敌方移动。

### 🛡️ 战团管理 (Squad Management)
*   **纸娃娃装备系统**：严格遵循《Battle Brothers》布局。
    *   **左侧审查区**：直观展示角色装备（头、身、主/副手、附件）及 4 格背包。
    *   **下方属性栏**：详细展示生命、体力、胆识、先手、命中及防御等 8 维核心数据。
*   **专精技能树**：7 阶层级的职业专精系统，从“强体”到“杀意”，通过升级点数定制角色成长。
*   **战阵布局**：18 格 (2x9) 动态阵型调整区，前排肉盾、后排长兵的布置决定胜负。

### 🏯 城邑交互
*   **市集 (Market)**：买卖战国制式装备。
*   **募兵 (Recruitment)**：招募来自不同背景（农夫、士族、猎户）的壮丁。
*   **酒肆 (Tavern)**：接取动态生成的契约任务（清剿、护送、送信）。
*   **医馆 (Temple)**：支付金钱治疗在战斗中负伤的战友。

---

## 技术架构

*   **前端框架**: React 19 (ESM 模式)
*   **编程语言**: TypeScript (类型安全保障)
*   **样式方案**: Tailwind CSS (战国古风 UI 定制)
*   **AI 驱动**: 
    *   集成 **Google Gemini 2.5/3 API**。
    *   利用大语言模型动态生成战国背景下的随机遭遇事件与剧情文案。
*   **地图引擎**: 基于原生 Canvas API 手写的高效 2D 地图系统。

---

## 游戏机制详解

### 属性说明
| 属性 | 描述 | 备注 |
| :--- | :--- | :--- |
| **近战命中 (MS)** | 决定近战武器的攻击成功率 | 受背景、专精影响 |
| **胆识 (Resolve)** | 决定士气检定与抗压能力 | 低于阈值将产生溃逃 |
| **先手 (Initiative)** | 决定每回合的行动顺序 | 受当前疲劳值动态扣减 |
| **疲劳 (Fatigue)** | 所有动作的成本 | 装备越重，可容纳的疲劳上限越低 |

### 背景星级
每个招募的角色在特定属性上拥有 0-3 颗“天赋星”，代表该属性在升级时能够获得更高的增幅潜力。

---

## 快速开始

1.  **移动**：在世界地图上点击地块设置目标，点击右键可快速设置路径。
2.  **营地**：点击右上角“战团营地”进行装备调整与布阵。
3.  **战斗**：进入战斗后，使用鼠标左键进行技能选取与释放，右键控制角色移动。

---

## 开发路线图 (Roadmap)
- [ ] **士气系统**：实现在战斗中因队友阵亡导致的士气连锁崩溃。
- [ ] **AI 增强**：实现敌方的合围、退避等高级 AI 策略。
- [ ] **动态贸易**：城邑的物资价格受战争、饥荒等状态影响波动。
- [ ] **剧情线**：接入 Gemini API 自动生成的长线分支任务系统。

---

*版权所有 © 2025 战国项目组。基于 MIT 协议授权。*
